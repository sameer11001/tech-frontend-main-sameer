<div class="bg-white rounded-lg shadow-sm p-6">
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-2xl font-bold text-gray-900">Scheduled Broadcast</h1>
    </div>
    <button 
      (click)="onNewBroadcast()"
      class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors duration-200">
      New Broadcast
    </button>
  </div>

  <div class="border-t border-gray-200 pt-4">
    <!-- Search Bar -->
    <div class="flex items-center justify-between mb-4">
      <div class="relative">
        <input
          type="text"
          placeholder="Search by template name..."
          [ngModel]="searchTerm"
          (input)="onSearchChange($event)"
          class="border border-gray-300 rounded pl-10 pr-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 w-80"
        />
        <!-- Search icon -->
        <svg
          class="w-5 h-5 text-gray-400 absolute left-3 top-2.5"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M21 21l-4.35-4.35m0 0A7.47 7.47 0 1010.53 3a7.47 7.47 0 006.12 13.65z"
          ></path>
        </svg>
      </div>
      <div class="text-xs text-gray-400">
        {{ (filteredBroadcasts$ | async)?.length || 0 }} of {{ (broadcasts$ | async)?.data?.length || 0 }} broadcasts
      </div>
    </div>

    <div class="flex justify-between items-center mb-4">
      <span class="text-gray-600">Broadcast name</span>
      <span class="text-gray-600">Scheduled Time</span>
      <span class="text-gray-600">Actions</span>
    </div>
    
    <div *ngIf="loading$ | async" class="text-center py-8 border-b border-gray-200">
      <p class="text-gray-500">Loading broadcasts...</p>
    </div>
    
    <div *ngIf="error$ | async as error" class="text-center py-8 border-b border-gray-200">
      <p class="text-red-500">
        Error loading broadcasts: 
        {{ error?.error?.message || error?.message || error }}
      </p>
    </div>
    
    <div *ngIf="!(loading$ | async) && !(error$ | async)" class="border-b border-gray-200">
      info
      <div class="text-xs text-gray-400 mb-2">
        {{ (broadcasts$ | async)?.data?.length || 0 }} broadcasts loaded
      </div>
      
      <div *ngIf="((filteredBroadcasts$ | async)?.length || 0) === 0 && ((broadcasts$ | async)?.data?.length || 0) > 0" class="text-center py-8">
        <p class="text-gray-500">No broadcasts found matching your search</p>
      </div>
      
      <div *ngIf="(broadcasts$ | async)?.data?.length === 0" class="text-center py-8">
        <p class="text-gray-500">No broadcasts available</p>
      </div>
      
      <div *ngFor="let broadcast of (filteredBroadcasts$ | async); trackBy: trackByBroadcastId" class="flex justify-between items-center py-4 border-b border-gray-100">
        <span class="text-gray-900 font-medium">{{ broadcast.name || broadcast.name || 'No Name' }}</span>
        <span class="text-gray-600">{{ broadcast.scheduled_time | date:'short' }}</span>
        <div class="flex space-x-2">
          <button 
            (click)="onViewBroadcast(broadcast)"
            class="text-blue-600 hover:text-blue-800 text-sm font-medium hover:underline transition-colors">
            View
          </button>
          <button 
            (click)="onDeleteBroadcast(broadcast.id, broadcast.name)"
            [disabled]="deleteLoading$ | async"
            class="text-red-600 hover:text-red-800 text-sm disabled:opacity-50 disabled:cursor-not-allowed">
            <span *ngIf="!(deleteLoading$ | async)">Delete</span>
            <span *ngIf="deleteLoading$ | async">Deleting...</span>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Pagination section removed as per requirements -->
    <!-- Note: Pagination controls have been removed since limit and page parameters are no longer used -->
  </div>
</div>